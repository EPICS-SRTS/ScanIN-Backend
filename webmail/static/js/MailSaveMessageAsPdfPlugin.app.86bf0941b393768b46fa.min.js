webpackJsonp([11],{306:function(e,t,n){"use strict";e.exports=function(e){var t=n(1),s=n(184),i=n(179),a=n(190),o=n(185),r=n(182);return r.getUserRole()===Enums.UserRole.NormalUser?{start:function(e){r.subscribeEvent("MailWebclient::AddMoreSectionCommand",function(e){e({Text:s.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ACTION_DOWNLOAD_PDF"),CssClass:"pdf",Handler:function(){if(this.currentMessage()){var e=this.currentMessage().getDomText(),n=function(e){try{var t=document.createElement("canvas"),n=null;t.width=e.width,t.height=e.height,n=t.getContext("2d"),n.drawImage(e,0,0),e.src=t.toDataURL("image/png")}catch(e){}};t("img[data-x-src-cid]",e).each(function(){n(this)}),a.send("MailSaveMessageAsPdfPlugin","GeneratePdfFile",{FileName:this.subject(),Html:e.html()},function(e){e.Result&&e.Result.Actions&&e.Result.Actions.download?i.downloadByUrl(e.Result.Actions.download.url):o.showErrorByCode(e,s.i18n("MAILSAVEMESSAGEASPDFPLUGIN/ERROR_CREATING_PDF"))},this)}}})})}}:null}}});