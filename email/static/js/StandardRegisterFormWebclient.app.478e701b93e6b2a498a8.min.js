webpackJsonp([22],{412:function(t,e,o){"use strict";t.exports=function(t){var e=o(182),s=o(413),i=e.getUserRole()===Enums.UserRole.Anonymous;return s.init(t),!e.isPublic()&&i?e.isMobile()?{getRegisterScreenView:function(){return o(414)},getHashModuleName:function(){return s.HashModuleName}}:{getScreens:function(){var t={};return t[s.HashModuleName]=function(){return o(414)},t}}:null}},413:function(t,e,o){"use strict";var s=o(2),i=o(181);t.exports={ServerModuleName:"StandardRegisterFormWebclient",HashModuleName:"register",CustomLogoUrl:"",InfoText:"",BottomInfoHtmlText:"",init:function(t){var e=t.StandardRegisterFormWebclient;s.isEmpty(e)||(this.ServerModuleName=i.pString(e.ServerModuleName,this.ServerModuleName),this.HashModuleName=i.pString(e.HashModuleName,this.HashModuleName),this.CustomLogoUrl=i.pString(e.CustomLogoUrl,this.CustomLogoUrl),this.InfoText=i.pString(e.InfoText,this.InfoText),this.BottomInfoHtmlText=i.pString(e.BottomInfoHtmlText,this.BottomInfoHtmlText))}}},414:function(t,e,o){"use strict";function s(){g.call(this,"StandardRegisterFormWebclient"),this.sCustomLogoUrl=p.CustomLogoUrl,this.sInfoText=p.InfoText,this.sBottomInfoHtmlText=p.BottomInfoHtmlText,this.login=r.observable(""),this.enableLoginEdit=r.observable(!0),this.password=r.observable(""),this.confirmPassword=r.observable(""),this.loginFocus=r.observable(!1),this.passwordFocus=r.observable(!1),this.confirmPasswordFocus=r.observable(!1),this.loading=r.observable(!1),this.canTryRegister=r.computed(function(){return!this.loading()},this),this.registerButtonText=r.computed(function(){return this.loading()?a.i18n("COREWEBCLIENT/ACTION_REGISTER_IN_PROGRESS"):a.i18n("COREWEBCLIENT/ACTION_REGISTER")},this),this.registerCommand=h.createCommand(this,this.register,this.canTryRegister),this.shake=r.observable(!1).extend({autoResetToFalse:800}),this.welcomeText=r.observable(""),m.subscribeEvent("ShowWelcomeRegisterText",i.bind(function(t){this.welcomeText(t.WelcomeText),this.login(t.UserName),this.enableLoginEdit(!1)},this)),m.broadcastEvent("StandardRegisterFormWebclient::ConstructView::after",{Name:this.ViewConstructorName,View:this})}var i=o(2),n=o(1),r=o(44),a=o(184),l=o(179),h=o(217),u=o(185),m=o(182),c=o(180),d=o(187),g=o(197),R=o(190),p=o(413),b=n("html");i.extendOwn(s.prototype,g.prototype),s.prototype.ViewTemplate="StandardRegisterFormWebclient_RegisterView",s.prototype.ViewConstructorName="CRegisterView",s.prototype.onBind=function(){b.addClass("non-adjustable-valign")},s.prototype.onShow=function(){i.delay(i.bind(function(){""===this.login()&&this.loginFocus(!0)},this),1)},s.prototype.validateForm=function(t,e,o){return""===t?(this.loginFocus(!0),this.shake(!0),!1):""===e?(this.passwordFocus(!0),this.shake(!0),!1):""===e||e===o||(this.confirmPasswordFocus(!0),this.shake(!0),d.showError(a.i18n("COREWEBCLIENT/ERROR_PASSWORDS_DO_NOT_MATCH")),!1)},s.prototype.register=function(){if(!this.loading()){var t=n.trim(this.login()),e=n.trim(this.password()),o=n.trim(this.confirmPassword()),s={Login:t,Password:e};this.validateForm(t,e,o)&&(this.loading(!0),R.send("StandardRegisterFormWebclient","Register",s,this.onRegisterResponse,this))}},s.prototype.onRegisterResponse=function(t,e){!1===t.Result?(this.loading(!1),this.shake(!0),u.showErrorByCode(t,a.i18n("COREWEBCLIENT/ERROR_REGISTRATION_FAILED"))):(n.cookie("AuthToken",t.Result.AuthToken,{expires:30}),""!==window.location.search&&null===l.getRequestParam("reset-pass")&&null===l.getRequestParam("invite-auth")&&null===l.getRequestParam("oauth")?l.clearAndReloadLocation(c.ie8AndBelow,!0):l.clearAndReloadLocation(c.ie8AndBelow,!1))},t.exports=new s}});